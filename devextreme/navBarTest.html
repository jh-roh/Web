<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>navBar MainLayout Test</title>




    <link href="./css/devextreme/Charset.css" rel="stylesheet" />
    <link href="./css/devextreme/bootstrap.css" rel="stylesheet" />
    <!-- <link rel="stylesheet" href="./css/site.css"> -->

    <link href="./css/devextreme/dx.common.css" rel="stylesheet" />
    <link href="./css/devextreme/dx.light.css" rel="stylesheet" />

    <script src="./js/devextreme/jquery.js"></script>

    <script src="./js/devextreme/bootstrap.js"></script>

    <script src="./js/devextreme/cldr.js"></script>
    <script src="./js/devextreme/cldr/event.js"></script>
    <script src="./js/devextreme/cldr/supplemental.js"></script>
    <script src="./js/devextreme/cldr/unresolved.js"></script>

    <script src="./js/devextreme/globalize.js"></script>
    <script src="./js/devextreme/globalize/message.js"></script>
    <script src="./js/devextreme/globalize/number.js"></script>
    <script src="./js/devextreme/globalize/currency.js"></script>
    <script src="./js/devextreme/globalize/date.js"></script>

    <script src="./js/devextreme/dx.all.js"></script>
    <script src="./js/devextreme/vectormap-data/world.js"></script>
    <script src="./js/devextreme/aspnet/dx.aspnet.data.js"></script>
    <script src="./js/devextreme/aspnet/dx.aspnet.mvc.js"></script>


    <!-- <link rel="stylesheet" href="./css/custom_sidebar.css"> -->
    <style>

    * {
        margin: 0;
        padding: 0;
    }

    /* ---------------------------------------------------
        SIDEBAR STYLE
    ----------------------------------------------------- */
    .wrapper {
        display: flex;
        align-items: stretch;
        background: #DCE6EE;
        height: 1078px;
    }

    #sidebar {
        min-width: 250px;
        max-width: 250px;
        background: #164482;
        color: #fff;
        transition: all 0.3s;
    }


    #sidebar.sideBar-minsize {
        min-width: 62px;
        max-width: 62px;
    }



    #sidebar > ul {
        min-height: calc(100% - 96px - 120px);
    }

    #sidebar > div {
        width: 260px;
        height: 96px;
    }

    #sidebar div.show {
        display: block;
    }
    #sidebar div.collapse {
        display: none;
    }


    #sidebar > div > a {
        position: absolute;
        top: 35px;
        left: 26px;
    }

    /*#sidebar ul > li:nth-child(1) {
        display: none;
    }*/

    #intipharm-Logo {
        width: 116px;
        height: 21px;
    }

    /*#sidebar > div > a > #intipharm-Logo {
        width: 116px;
        height: 21px;
    }*/
    #sidebar-open.show{
        display:block;
    }

    #sidebar-open.collapse {
        display: none;
    }

    /*#sidebar > div > #sidebar-close {
        position: absolute;
        top: 37px;
        left: 220px;
        cursor: pointer;
    }*/

    #sidebar-close {
        position: absolute;
        top: 37px;
        left: 220px;
        cursor: pointer;
    }

    /*#sidebar > div:nth-child(3) > #JVM-Logo {
        position: relative;
        margin-left: 81px;
    }*/

    #JVM-Logo {
        position: relative;
        margin-left: 81px;
    }

    #sidebar > ul > li {
        width: 260px;
        height: 62px;
    }

    #sidebar > ul > li > a {
        display: flex;
        text-decoration: none;
        color: white;
        padding: 15px;
        font-size: 18px;
    }

    #sidebar > ul > li.active,
    #sidebar > ul > li.active > a > span,
    #sidebar > ul > li > a:hover {
        background-color: #DCE6EE;
        color: #081E50;
    }

    #sidebar > ul > li > a > img {
        margin-left: 3px;
        width: 25px;
        height: 23px;
        background-repeat: no-repeat;
    }

    #sidebar > ul > li > a > span {
        margin-left: 23px;
        margin-top: -3px;
        font-weight: bold;
    }
            
    #sidebar > ul > li > a > #mainMenu {
        background-image: url(./images//Icon_home.svg);
    }

    #sidebar > ul > li.active > a > #mainMenu,
    #sidebar > ul > li > a:hover > #mainMenu {
        background-image: url(./images//Icon_home_active.svg);
    }

    #sidebar > ul > li > a > #prescriptionMenu {
        background-image: url(./images//Icon_prescription.svg);
    }

    #sidebar > ul > li.active > a > #prescriptionMenu,
    #sidebar > ul > li > a:hover > #prescriptionMenu {
        background-image: url(./images//Icon_prescription_active.svg);
    }


    #sidebar > ul > li > a > #itemHistoryMenu {
        background-image: url(./images//Icon_itemHistory.svg);
    }

    #sidebar > ul > li.active > a > #itemHistoryMenu,
    #sidebar > ul > li > a:hover > #itemHistoryMenu {
        background-image: url(./images//Icon_itemHistory_active.svg);
    }

    #sidebar > ul > li > a > #itemUsageMenu {
        background-image: url(./images//Icon_itemUsage.svg);
    }

    #sidebar > ul > li.active > a > #itemUsageMenu,
    #sidebar > ul > li > a:hover > #itemUsageMenu {
        background-image: url(./images//Icon_itemUsage_active.svg);
    }

    #sidebar > ul > li > a > #itemInventoryMenu {
        background-image: url(./images//Icon_inventory.svg);
    }

    #sidebar > ul > li.active > a > #itemInventoryMenu,
    #sidebar > ul > li > a:hover > #itemInventoryMenu {
        background-image: url(./images//Icon_inventory_active.svg);
    }

    #sidebar > ul > li > a > #LabelPrintMenu {
        background-image: url(./images//Icon_LabelPrint.svg);
    }

    #sidebar > ul > li.active > a > #LabelPrintMenu,
    #sidebar > ul > li > a:hover > #LabelPrintMenu {
        background-image: url(./images//Icon_LabelPrint_active.svg);
    }

    #sidebar > ul > li > a > #VerbalPrescriptionMenu {
        background-image: url(./images//Icon_VerbalPrescription.svg);
    }

    #sidebar > ul > li.active > a > #VerbalPrescriptionMenu,
    #sidebar > ul > li > a:hover > #VerbalPrescriptionMenu {
        background-image: url(./images//Icon_VerbalPrescription_active.svg);
    }

    #sidebar > ul > li > a > #RecoveryHistoryMenu {
        background-image: url(./images//Icon_RecoveryHistory.svg);
    }

    #sidebar > ul > li.active > a > #RecoveryHistoryMenu,
    #sidebar > ul > li > a:hover > #RecoveryHistoryMenu {
        background-image: url(./images//Icon_RecoveryHistory_active.svg);
    }

    #sidebar > ul > li > a > #UserActionMenu {
        background-image: url(./images//Icon_UserAction.svg);
    }

    #sidebar > ul > li.active > a > #UserActionMenu,
    #sidebar > ul > li > a:hover > #UserActionMenu {
        background-image: url(./images//Icon_UserAction_active.svg);
    }

    #sidebar > ul > li > a > #TemperatureHumidityMenu {
        background-image: url(./images//Icon_Temperature.svg);
    }

    #sidebar > ul > li.active > a > #TemperatureHumidityMenu,
    #sidebar > ul > li > a:hover > #TemperatureHumidityMenu {
        background-image: url(./images//Icon_Temperature_active.svg);
    }

    #content {
        width: calc(100% - 250px);
        min-height: 100vh;
        transition: all 0.3s;
        background: #DCE6EE;
    }

    #content.minimize {
        width: calc(100% - 62px);
    }

    #content > .container-fluid > div:nth-child(1) {
        background-color:red; 
        margin:0px 10px; 
        height:96px;
    }

    </style>
</head>
<body>
    <div class="wrapper">
        <nav id="sidebar">
            <div>
                <a href="#">
                    <img id="Logo1"  src="./images/logo.svg" />
                </a>
                <img id="sidebar-close" src="./images/sidebar_close.svg" onclick="handlerSidebarCloseClick()" />
            </div>

            <ul class="list-unstyled">
                <li id="sidebar-open" onclick="handlerSidebarOpenClick()">
                    <a href="#">
                        <img src="./images/sidebar_open.svg" />
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="mainMenu"  src="./images/Icon_Temp.svg"/>
                        <span>테스트1</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="prescriptionMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트2</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="itemHistoryMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트3</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="itemUsageMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트4</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="LabelPrintMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트5</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="VerbalPrescriptionMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트6</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="RecoveryHistoryMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트7</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="TemperatureHumidityMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트8</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="UserActionMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트9</span>
                    </a>
                </li>
            </ul>
            
                
            <div>
                <img id="Logo2" src="./images/logo.svg" />
            </div>
        </nav>
        <div id="content">
            <div class="container-fluid">
                <div style="display:flex;">
                    <div style="width:100px; flex-shrink:0; background-color:deeppink">왼쪽</div>
                    <div style="flex-grow:1; background-color:hotpink;">중간</div>
                    <div style="width:100px; flex-shrink:0; background-color:lightpink;">오른쪽</div>
                </div>
                <div style="margin:0px 10px;">
                    @RenderBody()
                </div>
            </div>


        </div>

    </div>

    <script type="text/javascript">

        let isSideBarClicked = false;
        let mobileSizeWidth = 768;

        // 클래스 추가
        function addClass(element, className) {
            if (!element.classList.contains(className)) {
                element.classList.add(className);
            }
        }

        // 클래스 제거
        function removeClass(element, className) {
            if (element.classList.contains(className)) {
                element.classList.remove(className);
            }
        }


        function sidebarToggle(isOpned) {
            var sidebar = document.getElementById('sidebar');
            var sidebarDivs = document.querySelectorAll('#sidebar div');
            var sidebarOpenId = document.querySelector('#sidebar-open');

            if (isOpned == true) {
                removeClass(sidebar, 'sideBar-minsize');
                sidebarDivs.forEach(function (div) {
                    removeClass(div, 'collapse');
                    addClass(div, 'show')
                });

                removeClass(sidebarOpenId, 'show');
                addClass(sidebarOpenId, 'collapse');

                removeClass(content, 'minimize');
            }
            else {

                addClass(sidebar, 'sideBar-minsize');
                sidebarDivs.forEach(function (div) {
                    removeClass(div, 'show');
                    addClass(div, 'collapse');
                });

                removeClass(sidebarOpenId, 'collapse');
                addClass(sidebarOpenId, 'show');

                addClass(content, 'minimize');
            }

        }

        function handlerSidebarOpenClick() {
            let windowWidth = window.innerWidth;
            if (windowWidth > mobileSizeWidth) {
                sidebarToggle(true);
                isSideBarClicked = false;

                console.log('sidebar Open');
            }
            else {
                window.alert('모바일 사이즈에서는 사용할 수 없습니다.')
            }

        }
        function handlerSidebarCloseClick() {
            let windowWidth = window.innerWidth;
            if (windowWidth > mobileSizeWidth) {
                sidebarToggle(false);
                isSideBarClicked = true;

                console.log('sidebar Close');
            }

        }

        function handlerResize() {
            let windowWidth = window.innerWidth;
            const content = document.getElementById('content');

            if (windowWidth <= mobileSizeWidth) {
                sidebarToggle(false);
            }
            else {
                if (isSideBarClicked == false) {
                    sidebarToggle(true);
                }
            }

        }
        document.addEventListener('DOMContentLoaded', function () {

            var currentPageUrl = window.location.href;

            // #sidebar 태그 안의 li 태그들의 a 태그에서 현재 페이지의 URL과 href 값이 같은지 체크
            var navLinks = document.querySelectorAll('#sidebar ul li a');
       
            navLinks.forEach(function (link) {
                var linkHref = link.getAttribute('href');

                if (currentPageUrl.indexOf(linkHref) >= 0) {
                    console.log("현재 페이지와 href 값이 같은 링크:", linkHref);
                    // 여기에서 필요한 추가 동작을 수행할 수 있습니다.
                    link.parentNode.classList.add('active'); // 예: 해당 li에 'active' 클래스 추가

                    if (currentPageUrl.includes("/Report/CommonReport")) {
                        console.log("href 속성에 /Report/CommonReport 값이 포함된 링크:", linkHref);

                        // CommonReport.cshtml의 이벤트를 로드한다.
                        commonReportLoad();
                    }
                    else {
                        console.log("href 속성에 /Report/CommonReport 값이 포함되지 않음:", linkHref);
                    }
                }
            });

            handlerResize();

            window.addEventListener('resize', handlerResize);
        });
    </script>
</body>
</html>