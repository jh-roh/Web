<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>navBar MainLayout Test</title>




    <link href="./css/devextreme/Charset.css" rel="stylesheet" />
    <link href="./css/devextreme/bootstrap.css" rel="stylesheet" />


    <link href="./css/devextreme/dx.common.css" rel="stylesheet" />
    <link href="./css/devextreme/dx.light.css" rel="stylesheet" />

    <script src="./js/devextreme/jquery.js"></script>

    <script src="./js/devextreme/bootstrap.js"></script>

    <script src="./js/devextreme/cldr.js"></script>
    <script src="./js/devextreme/cldr/event.js"></script>
    <script src="./js/devextreme/cldr/supplemental.js"></script>
    <script src="./js/devextreme/cldr/unresolved.js"></script>

    <script src="./js/devextreme/globalize.js"></script>
    <script src="./js/devextreme/globalize/message.js"></script>
    <script src="./js/devextreme/globalize/number.js"></script>
    <script src="./js/devextreme/globalize/currency.js"></script>
    <script src="./js/devextreme/globalize/date.js"></script>

    <script src="./js/devextreme/dx.all.js"></script>
    <script src="./js/devextreme/vectormap-data/world.js"></script>
    <script src="./js/devextreme/aspnet/dx.aspnet.data.js"></script>
    <script src="./js/devextreme/aspnet/dx.aspnet.mvc.js"></script>


    <!-- <link rel="stylesheet" href="./css/custom_sidebar.css"> -->

    <link rel="stylesheet" href="./navBarTest.css">
    <style>

    </style>
</head>
<body>
    <div class="wrapper">
        <nav id="sidebar">
            <div>
                <a href="#">
                    <img id="Logo1"  src="./images/logo.svg" />
                </a>
                <img id="sidebar-close" src="./images/sidebar_close.svg" onclick="handlerSidebarCloseClick()" />
            </div>

            <ul class="list-unstyled">
                <li id="sidebar-open" onclick="handlerSidebarOpenClick()">
                    <a href="#">
                        <img src="./images/sidebar_open.svg" />
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="mainMenu"  src="./images/Icon_Temp.svg"/>
                        <span>테스트1</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="prescriptionMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트2</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="itemHistoryMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트3</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="itemUsageMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트4</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="LabelPrintMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트5</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="VerbalPrescriptionMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트6</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="RecoveryHistoryMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트7</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="TemperatureHumidityMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트8</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img id="UserActionMenu" src="./images/Icon_Temp.svg" />
                        <span>테스트9</span>
                    </a>
                </li>
            </ul>
            <div>
                <img id="Logo2" src="./images/logo.svg" />
            </div>
        </nav>
        <div id="content">
            <div style="display:flex;">
                <div style="width:300px;  background-color:deeppink">왼쪽</div>
                <div style="flex-grow:1; background-color:hotpink;">중간</div>
                <div style="width:300px;  background-color:lightpink;">오른쪽</div>
            </div>
            <div class="bg-light text-dark border rounded overflow-hidden shadow-sm">
      
                <!-- 데스크탑 버전 -->
                <div id="container-desktop"  >
                    <div class="search" >테스트 1</div>
                    <div class="periodSearch periodSearch-three">1234</div>
                    <div class="periodSearch periodSearch-six">4567</div>
                    <div class="periodSearch periodSearch-year">891011</div>

                    <div class="search" >테스트 2</div>
                    <div class="startDateBox"></div>
                    <div class="dateBox-Tilde">~</div>
                    <div class="endDateBox"></div>
                    <div class="searchTextBox" ></div>
                    <div class="searchString" >검색</div>
                </div>


                <!-- 모바일 버전 -->
                <div id="container-mobile" class="container-fluid">
                    <div class="row">
                        <div class="search" >테스트 1</div>
                    </div>
                    <div class="row">
                        <div class="periodSearch col-xs-4 periodSearch-three" >1234</div>
                        <div class="periodSearch col-xs-4 periodSearch-six" >4567</div>
                        <div class="periodSearch col-xs-4 periodSearch-year" >891011</div>
                    </div>

                    <div class="row">
                        <div class="search">테스트 2</div>
                    </div>

                    <div class="row">
                        <div class="startDateBox"></div>
                    </div>

                    <div class="row">
                        <div class="endDateBox" ></div>
                    </div>
                    <div class="row">
                        <div class="searchTextBox"  ></div>
                    </div>
                    <div class="row">
                        <div class="searchString">검색</div>
                    </div>
                </div>
                <div style="margin:0px 30px;" id="gridContainer"></div>
            </div>

            <div style="display: flex; justify-content: flex-end; margin-right: 15px;">
                <div>안녕하세요</div>
            </div>
            
        
        </div>
    </div>


    <script type="text/javascript">

        let isSideBarClicked = false;
        let mobileSizeWidth = 768;

        // 클래스 추가
        function addClass(element, className) {
            if (!element.classList.contains(className)) {
                element.classList.add(className);
            }
        }

        // 클래스 제거
        function removeClass(element, className) {
            if (element.classList.contains(className)) {
                element.classList.remove(className);
            }
        }


        function sidebarToggle(isOpned) {
            var sidebar = document.getElementById('sidebar');
            var sidebarDivs = document.querySelectorAll('#sidebar div');
            var sidebarOpenId = document.querySelector('#sidebar-open');

            if (isOpned == true) {
                removeClass(sidebar, 'sideBar-minsize');
                sidebarDivs.forEach(function (div) {
                    removeClass(div, 'collapse');
                    addClass(div, 'show')
                });

                removeClass(sidebarOpenId, 'show');
                addClass(sidebarOpenId, 'collapse');

                removeClass(content, 'minimize');
            }
            else {

                addClass(sidebar, 'sideBar-minsize');
                sidebarDivs.forEach(function (div) {
                    removeClass(div, 'show');
                    addClass(div, 'collapse');
                });

                removeClass(sidebarOpenId, 'collapse');
                addClass(sidebarOpenId, 'show');

                addClass(content, 'minimize');
            }

        }

        function handlerSidebarOpenClick() {
            let windowWidth = window.innerWidth;
            if (windowWidth > mobileSizeWidth) {
                sidebarToggle(true);
                isSideBarClicked = false;

                console.log('sidebar Open');
            }
            else {
                window.alert('모바일 사이즈에서는 사용할 수 없습니다.')
            }

        }
        function handlerSidebarCloseClick() {
            let windowWidth = window.innerWidth;
            if (windowWidth > mobileSizeWidth) {
                sidebarToggle(false);
                isSideBarClicked = true;

                console.log('sidebar Close');
            }

        }

        function handlerResize() {
            let windowWidth = window.innerWidth;
            const content = document.getElementById('content');

            if (windowWidth <= mobileSizeWidth) {
                sidebarToggle(false);
            }
            else {
                if (isSideBarClicked == false) {
                    sidebarToggle(true);
                }
            }

        }

        function reportControlLoad() {
            const nowDate = new Date();
            $('.periodSearch-three').dxButton({
                stylingMode: 'contained',
                type: 'default',
            });
            $('.periodSearch-six').dxButton({
                stylingMode: 'contained',
                type: 'default',
            });

            $('.periodSearch-year').dxButton({
                stylingMode: 'contained',
                type: 'default',
            });

            $('.startDateBox').dxDateBox({
              value: nowDate,
              displayFormat: 'yyyy-MM-dd',
              stylingMode: "underlined",
            });

            $('.endDateBox').dxDateBox({
              value: nowDate,
              displayFormat: 'yyyy-MM-dd',
              stylingMode: "underlined",
            });

            $('.searchTextBox').dxTextBox({
                value: '',
            });

            $('.searchString').dxButton({
                stylingMode: 'contained',
                type: 'default',
            });



            // $('#container-mobile > .row > .periodSearch-three').dxButton({
            //     stylingMode: 'contained',
            //     type: 'default',
            // });
            // $('#container-mobile > .row > .periodSearch-six').dxButton({
            //     stylingMode: 'contained',
            //     type: 'default',
            // });

            // $('#container-mobile > .row > .periodSearch-year').dxButton({
            //     stylingMode: 'contained',
            //     type: 'default',
            // });

            // $('#container-mobile > .row > .startDateBox').dxDateBox({
            //   value: nowDate,
            //   displayFormat: 'yyyy-MM-dd',
            //   stylingMode: "underlined",
            // });

            // $('#container-mobile > .row > .endDateBox').dxDateBox({
            //   value: nowDate,
            //   displayFormat: 'yyyy-MM-dd',
            //   stylingMode: "underlined",
            // });

            // $('#container-mobile > .row > .searchTextBox').dxTextBox({
            //     value: '',
            // });

            // $('#container-mobile > .row > .searchString').dxButton({
            //     stylingMode: 'contained',
            //     type: 'default',
            // });
            
        }

        document.addEventListener('DOMContentLoaded', function () {
            var currentPageUrl = window.location.href;
            // #sidebar 태그 안의 li 태그들의 a 태그에서 현재 페이지의 URL과 href 값이 같은지 체크
            var navLinks = document.querySelectorAll('#sidebar ul li a');
       
            navLinks.forEach(function (link) {
                var linkHref = link.getAttribute('href');

                if (currentPageUrl.indexOf(linkHref) >= 0) {
                    console.log("현재 페이지와 href 값이 같은 링크:", linkHref);
                    // 여기에서 필요한 추가 동작을 수행할 수 있습니다.
                    link.parentNode.classList.add('active'); // 예: 해당 li에 'active' 클래스 추가

                    if (currentPageUrl.includes("/Report/CommonReport")) {
                        console.log("href 속성에 /Report/CommonReport 값이 포함된 링크:", linkHref);

                        // CommonReport.cshtml의 이벤트를 로드한다.
                        commonReportLoad();
                    }
                    else {
                        console.log("href 속성에 /Report/CommonReport 값이 포함되지 않음:", linkHref);
                    }
                }
            });

            handlerResize();
            reportControlLoad();
            window.addEventListener('resize', handlerResize);
        });
    </script>
</body>
</html>